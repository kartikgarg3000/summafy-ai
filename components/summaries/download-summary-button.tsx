"use client"
import { Download } from "lucide-react";
import { Button } from "../ui/button";

export default function DownloadSummaryButton({ fileName,
    title,
    summary_text,
    createdAt }:
    {
        fileName: string;
        title: string;
        summary_text: string;
        createdAt: string
    }) {
    const handleDownload = () => {
        const summaryContent = `#${title}
Generated Summary
Generated on :${createdAt}
        
${summary_text}
        
Original File: ${fileName}
Generated by Summafy AI`;
        const blob = new Blob([summaryContent], {type: 'text/plain'});
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.href = url;
        link.download = `Summary-${title.replace(/[^a-z0-9]/gi,'_')}.txt`;
        document.body.appendChild(link)
        link.click();
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
    }
    return (
        <Button size={"sm"} className="h-8 px-3 bg-teal-100 text-teal-600 hover:text-teal-700 hover:bg-teal-50"
            onClick={handleDownload}
        >
            <Download className="h-4 w-4 mr-1" />
            Download Summary
        </Button>
    )
}